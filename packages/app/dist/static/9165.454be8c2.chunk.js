(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9165],{56420:(_,U,n)=>{"use strict";n.d(U,{Y:()=>ne});var e=n(95208),W=n(77125),D=n(64947),K=n(93453),w=n(29365),j=n(46423),ie=n(5951),A=n(26343),V=n(28233),T=n(55197),ce=n(58837),me=n(72501),ee=n(5893),p=n(14041),d=n(45250),Q=n.n(d),te=n(70209),X=n(92483),M=n(75202),J=n(89475),ue=n(10265);const pe=(0,ce.A)({popoverList:{minWidth:260,maxWidth:400},menuItem:{whiteSpace:"normal"}},{name:"BackstageSupportButton"}),de=({icon:R})=>{const b=(0,e.n)(),L=R?b.getSystemIcon(R)??X.NT:X.NT;return p.createElement(L,null)},Ee=({link:R})=>p.createElement(M.N_,{to:R.url},R.title??R.url),$=({item:R})=>p.createElement(A.A,{button:!1},p.createElement(j.A,null,p.createElement(de,{icon:R.icon})),p.createElement(ie.A,{primary:R.title,secondary:R.links?.reduce((b,L,F)=>[...b,F>0&&p.createElement("br",{key:F}),p.createElement(Ee,{link:L,key:L.url})],[])}));function ne(R){const{t:b}=(0,ue.i)(J.O),{title:L,items:F,children:ge}=R,{items:k}=(0,te.l)(),[O,N]=(0,p.useState)(!1),[ae,re]=(0,p.useState)(null),Y=pe(),Z=(0,ee.A)(x=>x.breakpoints.down("sm")),G=x=>{re(x.currentTarget),N(!0)},B=()=>{N(!1)};return p.createElement(p.Fragment,null,p.createElement(W.A,{display:"flex",ml:1},Z?p.createElement(w.A,{color:"primary",size:"small",onClick:G,"data-testid":"support-button","aria-label":"Support"},p.createElement(X.NT,null)):p.createElement(D.A,{"data-testid":"support-button","aria-label":"Support",color:"primary",onClick:G,startIcon:p.createElement(X.NT,null)},b("supportButton.title"))),p.createElement(T.Ay,{"data-testid":"support-button-popover",open:O,anchorEl:ae,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:B},p.createElement(V.A,{className:Y.popoverList,autoFocusItem:!!ae},L&&p.createElement(A.A,{button:!1,alignItems:"flex-start",className:Y.menuItem},p.createElement(me.A,{variant:"subtitle1"},L)),p.Children.map(ge,(x,z)=>p.createElement(A.A,{button:!1,alignItems:"flex-start",key:`child-${z}`,className:Y.menuItem},x)),(F??k).map((x,z)=>p.createElement($,{item:x,key:`item-${z}`}))),p.createElement(K.A,null,p.createElement(D.A,{color:"primary",onClick:B,"aria-label":"Close"},b("supportButton.close")))))}},39165:(_,U,n)=>{"use strict";n.r(U),n.d(U,{ImportPage:()=>ut});var e=n(14041),W=n(18690),D=n(82326),K=n(16654),w=n(16454),j=n(17138),ie=n(56420),A=n(18139),V=n(54195),T=n(42899),ce=n(5893),me=n(54917),ee=n(21332),p=n(67720),d=n(72501),Q=n(5336),te=n(51419),X=n(52536),M=n(3969);function J(){const t=(0,A.gf)(V.U);return(0,M.J7)(t)}const ue=t=>{const{exampleLocationUrl:a="https://github.com/backstage/backstage/blob/master/catalog-info.yaml",exampleRepositoryUrl:r="https://github.com/backstage/backstage"}=t,o=(0,A.gf)(V.U),l=o.getOptionalString("app.title")||"Backstage",i=(0,A.gf)(Q.g),c=o.has("integrations.github"),s=J();return e.createElement(ee.n,{title:"Register an existing component",titleTypographyProps:{component:"h3"},deepLink:{title:"Learn more about the Software Catalog",link:"https://backstage.io/docs/features/software-catalog/"}},e.createElement(d.A,{variant:"body2",paragraph:!0},"Enter the URL to your source code repository to add it to ",l,"."),e.createElement(d.A,{component:"h4",variant:"h6"},"Link to an existing entity file"),e.createElement(d.A,{variant:"subtitle2",color:"textSecondary",paragraph:!0},"Example: ",e.createElement("code",null,a)),e.createElement(d.A,{variant:"body2",paragraph:!0},"The wizard analyzes the file, previews the entities, and adds them to the ",l," catalog."),c&&e.createElement(e.Fragment,null,e.createElement(d.A,{component:"h4",variant:"h6"},"Link to a repository"," ",e.createElement(p.A,{label:"GitHub only",variant:"outlined",size:"small"})),e.createElement(d.A,{variant:"subtitle2",color:"textSecondary",paragraph:!0},"Example: ",e.createElement("code",null,r)),e.createElement(d.A,{variant:"body2",paragraph:!0},"The wizard discovers all ",e.createElement("code",null,s)," files in the repository, previews the entities, and adds them to the ",l," ","catalog."),i.preparePullRequest&&e.createElement(d.A,{variant:"body2",paragraph:!0},"If no entities are found, the wizard will prepare a Pull Request that adds an example ",e.createElement("code",null,s)," and prepares the ",l," catalog to load all entities as soon as the Pull Request is merged.")))};var pe=n(21619),de=n(41045),Ee=n(78733),$=n(58837);function ne(t){return{activeFlow:"unknown",activeState:"analyze",analysisUrl:t,previousStates:[]}}function R(t,a){switch(a.type){case"onAnalysis":{if(t.activeState!=="analyze")return t;const{activeState:r,previousStates:o}=t,[l,i,c,s]=a.args;return{...t,analysisUrl:i,activeFlow:l,analyzeResult:c,prepareResult:s?.prepareResult,activeState:s?.prepareResult===void 0?"prepare":"review",previousStates:o.concat(r)}}case"onPrepare":{if(t.activeState!=="prepare")return t;const{activeState:r,previousStates:o}=t,[l,i]=a.args;return{...t,prepareResult:l,activeState:"review",previousStates:i?.notRepeatable?[]:o.concat(r)}}case"onReview":{if(t.activeState!=="review")return t;const{activeState:r,previousStates:o}=t,[l]=a.args;return{...t,reviewResult:l,activeState:"finish",previousStates:o.concat(r)}}case"onGoBack":{const{activeState:r,previousStates:o}=t;return{...t,activeState:o.length>0?o[o.length-1]:r,previousStates:o.slice(0,o.length-1)}}case"onReset":return{...ne(a.initialUrl),prepareResult:t.prepareResult};default:throw new Error}}const b=t=>{const[a,r]=(0,e.useReducer)(R,t?.initialUrl,ne),{activeFlow:o,activeState:l,analysisUrl:i,previousStates:c}=a;return{activeFlow:o,activeState:l,activeStepNumber:["analyze","prepare","review","finish"].indexOf(l),analysisUrl:i,analyzeResult:a.analyzeResult,prepareResult:a.prepareResult,reviewResult:a.reviewResult,onAnalysis:(s,E,u,f)=>r({type:"onAnalysis",args:[s,E,u,f]}),onPrepare:(s,E)=>r({type:"onPrepare",args:[s,E]}),onReview:s=>r({type:"onReview",args:[s]}),onGoBack:c.length>0?()=>r({type:"onGoBack"}):void 0,onReset:()=>r({type:"onReset",initialUrl:t?.initialUrl})}};var L=n(77125),F=n(69076),ge=n(86901),k=n(51253),O=n(37877),N=n(16249),ae=n(87318),re=n(64947),Y=n(78467);const Z=(0,$.A)(t=>({wrapper:{marginTop:t.spacing(1),marginRight:t.spacing(1),position:"relative"},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},button:{marginTop:t.spacing(1),marginRight:t.spacing(1)}})),G=t=>{const{loading:a,...r}=t,o=Z();return e.createElement("div",{className:o.wrapper},e.createElement(re.A,{color:"primary",variant:"contained",...r,disabled:t.disabled||t.loading}),t.loading&&e.createElement(Y.A,{size:"1.5rem",className:o.buttonProgress}),t.loading)},B=t=>{const a=Z();return e.createElement(re.A,{variant:"outlined",className:a.button,...t},t.children||"Back")},x=t=>{const a=Z();return e.createElement(ae.z,{color:"primary",variant:"contained",className:a.button,...t},t.children)};var z=n(52755),oe=n(78560),xe=n(91072),Ue=n(37281),De=n(45809),Me=n(69621),be=n(29365),Ae=n(58007),ve=n(8109),fe=n(46423),Fe=n(65569),he=n(5951),Ne=n(23164),ze=n(6924);const We=(0,$.A)(t=>({nested:{paddingLeft:t.spacing(4)}})),q=t=>{const{locations:a,collapsed:r=!1,locationListItemIcon:o,onItemClick:l,firstListItem:i,withLinks:c=!1}=t,s=We(),E=(0,A.gf)(xe.n),[u,f]=(0,e.useState)([]),g=m=>{f(h=>h.includes(m)?h.filter(y=>y!==m):h.concat(m))};function v(m){return m.sort((h,y)=>E.forEntity((0,oe.U2)(h)).snapshot.entityRef.localeCompare(E.forEntity((0,oe.U2)(y)).snapshot.entityRef))}return e.createElement(Ae.A,null,i,a.map(m=>e.createElement(e.Fragment,{key:m.target},e.createElement(ve.A,{dense:!0,button:!!l,onClick:()=>l?.(m.target)},e.createElement(fe.A,null,o(m.target)),e.createElement(he.A,{primary:m.target,secondary:`Entities: ${m.entities.length}`}),r&&e.createElement(Fe.A,null,e.createElement(be.A,{edge:"end",onClick:()=>g(m.target)},u.includes(m.target)?e.createElement(Ne.A,null):e.createElement(ze.A,null)))),e.createElement(Me.A,{in:!r||u.includes(m.target),timeout:"auto",unmountOnExit:!0},e.createElement(Ae.A,{component:"div",disablePadding:!0,dense:!0},v(m.entities).map(h=>e.createElement(ve.A,{key:(0,oe.U2)(h),className:s.nested,...c?{component:Ue.z,entityRef:h,button:c}:{}},e.createElement(he.A,{primary:e.createElement(De.d,{entityRef:h})}))))))))};var Ce=n(75202),Ke=n(19953),Re=n.n(Ke),we=n(55488),ke=n(20987),Ge=n(72814);const He=t=>{for(const a of t)for(const r of a.entities)if(["component","api","resource"].includes(r.kind.toLocaleLowerCase("en-US")))return{kind:r.kind.toLocaleLowerCase("en-US"),namespace:r.namespace?.toLocaleLowerCase("en-US")??we.oQ,name:r.name};return null},Ve=({prepareResult:t,onReset:a})=>{const r=(0,Ge.S)(ke.s);if(t.type==="repository")return e.createElement(e.Fragment,null,e.createElement(d.A,{paragraph:!0},"The following Pull Request has been opened:"," ",e.createElement(Ce.N_,{to:t.pullRequest.url,target:"_blank",rel:"noreferrer"},t.pullRequest.url)),e.createElement(d.A,{paragraph:!0},"Your entities will be imported as soon as the Pull Request is merged."),e.createElement(T.A,{container:!0,spacing:0},e.createElement(B,{onClick:a},"Register another")));const[o,l]=Re()(t.locations,c=>c.exists),i=He(l);return e.createElement(e.Fragment,null,l.length>0&&e.createElement(e.Fragment,null,e.createElement(d.A,null,"The following entities have been added to the catalog:"),e.createElement(q,{locations:l,locationListItemIcon:()=>e.createElement(z.A,null),withLinks:!0})),o.length>0&&e.createElement(e.Fragment,null,e.createElement(d.A,null,"A refresh was triggered for the following locations:"),e.createElement(q,{locations:o,locationListItemIcon:()=>e.createElement(z.A,null),withLinks:!0})),e.createElement(T.A,{container:!0,spacing:0},i&&e.createElement(x,{to:r(i)},"View Component"),e.createElement(B,{onClick:a},"Register another")))};var Pe=n(24453),le=n(80824);const $e=t=>{const{onAnalysis:a,analysisUrl:r="",disablePullRequest:o=!1,exampleLocationUrl:l="https://github.com/backstage/backstage/blob/master/catalog-info.yaml"}=t,i=(0,A.gf)(Pe.m),c=(0,A.gf)(Q.g),{register:s,handleSubmit:E,formState:{errors:u},watch:f}=(0,le.mN)({mode:"onTouched",defaultValues:{url:r}}),[g,v]=(0,e.useState)(!1),[m,h]=(0,e.useState)(void 0),y=(0,e.useCallback)(async({url:C})=>{v(!0);try{const P=await c.analyzeUrl(C);switch(P.type){case"repository":!o&&P.generatedEntities.length>0?a("no-location",C,P):(h("Couldn't generate entities for your repository"),v(!1));break;case"locations":{P.locations.length===1?a("single-location",C,P,{prepareResult:P}):P.locations.length>1?a("multiple-locations",C,P):(h("There are no entities at this location"),v(!1));break}default:{const se=`Received unknown analysis result of type ${P.type}. Please contact the support team.`;h(se),v(!1),i.post(new Error(se));break}}}catch(P){h(P?.data?.error?.message??P.message),v(!1)}},[c,o,i,a]);return e.createElement("form",{onSubmit:E(y)},e.createElement(N.A,{...(0,M.eO)(s("url",{required:!0,validate:{httpsValidator:C=>typeof C=="string"&&C.match(/^http[s]?:\/\//)!==null||"Must start with http:// or https://."}})),fullWidth:!0,id:"url",label:"URL",placeholder:l,helperText:"Enter the full path to your entity file to start tracking your component",margin:"normal",variant:"outlined",error:!!u.url,required:!0}),u.url&&e.createElement(k.A,{error:!0},u.url.message),m&&e.createElement(k.A,{error:!0},m),e.createElement(T.A,{container:!0,spacing:0},e.createElement(G,{disabled:!!u.url||!f("url"),loading:g,type:"submit"},"Analyze")))};var Ye=n(61783);const je=t=>{const{name:a,options:r,required:o,errors:l,rules:i,loading:c=!1,loadingText:s,helperText:E,errorHelperText:u,textFieldProps:f={}}=t;return e.createElement(le.xI,{name:a,rules:i,render:({field:{onChange:g}})=>e.createElement(Ye.Ay,{loading:c,loadingText:s,options:r||[],autoSelect:!0,freeSolo:!0,onChange:(v,m)=>g(m),renderInput:v=>e.createElement(N.A,{...v,helperText:l?.[a]&&u||E,error:!!l?.[a],margin:"normal",variant:"outlined",required:o,InputProps:{...v.InputProps,endAdornment:e.createElement(e.Fragment,null,c?e.createElement(Y.A,{color:"inherit",size:"1em"}):null,v.InputProps.endAdornment)},...f})})})};var Qe=n(45250),Se=n(3399),Le=n(30043),Xe=n(53318),Ie=n(73466);const Je=t=>{const{defaultValues:a,onSubmit:r,render:o}=t,l=(0,le.mN)({mode:"onTouched",defaultValues:a}),{handleSubmit:i,watch:c,control:s,register:E,formState:u,setValue:f}=l;return e.createElement(le.Op,{...l},e.createElement("form",{onSubmit:i(r)},o({values:c(),formState:u,register:E,control:s,setValue:f})))};var Te=n(40703),Oe=n(48653),Be=n(45685),Ze=n(62112);const qe=t=>{const{repositoryUrl:a,entities:r,classes:o}=t,l=J();return e.createElement(Te.A,{variant:"outlined",className:o?.card},e.createElement(Be.A,{title:e.createElement("code",null,`${(0,Qe.trimEnd)(a,"/")}/${l}`)}),e.createElement(Oe.A,{className:o?.cardContent},e.createElement(Ze.z,{text:r.map(i=>te.Ay.stringify(i)).join(`---
`).trim(),language:"yaml"})))};var _e=n(28364);const et=t=>{const{title:a,description:r,classes:o}=t;return e.createElement(Te.A,{variant:"outlined",className:o?.card},e.createElement(Be.A,{title:a,subheader:"Create a new Pull Request"}),e.createElement(Oe.A,{className:o?.cardContent},e.createElement(_e.h,{content:r})))},tt=(0,$.A)(t=>({previewCard:{marginTop:t.spacing(1)},previewCardContent:{paddingTop:0}}));function ye(t,a,r){return t.map(o=>({...o,apiVersion:o.apiVersion,kind:o.kind,metadata:{...o.metadata,name:a},spec:{...o.spec,...r?{owner:r}:{}}}))}const nt=t=>{const{analyzeResult:a,onPrepare:r,onGoBack:o,renderFormFields:l}=t,i=tt(),c=(0,A.gf)(Le.v),s=(0,A.gf)(Q.g),E=(0,A.gf)(Pe.m),[u,f]=(0,e.useState)(!1),[g,v]=(0,e.useState)(),m=J(),{loading:h,value:y,error:C}=(0,Ie.A)(()=>s.preparePullRequest(),[s.preparePullRequest]);(0,e.useEffect)(()=>{C&&E.post(C)},[C,E]);const{loading:P,value:se}=(0,Ie.A)(async()=>(await c.getEntities({filter:{kind:"group"}})).items.map(I=>(0,Xe.S)(I,{defaultKind:"group"})).sort()),pt=(0,e.useCallback)(async S=>{f(!0);try{const I=await s.submitPullRequest({repositoryUrl:a.url,title:S.title,body:S.body,fileContent:ye(a.generatedEntities,S.componentName,S.owner).map(H=>te.Ay.stringify(H)).join(`---
`)});r({type:"repository",url:a.url,integrationType:a.integrationType,pullRequest:{url:I.link},locations:[{target:I.location,entities:ye(a.generatedEntities,S.componentName,S.owner).map(H=>({kind:H.kind,namespace:H.metadata.namespace,name:H.metadata.name}))}]},{notRepeatable:!0})}catch(I){(0,Se.tX)(I),v(I.message),f(!1)}},[a.generatedEntities,a.integrationType,a.url,s,r]);return e.createElement(e.Fragment,null,e.createElement(d.A,null,"You entered a link to a ",a.integrationType," repository but a"," ",e.createElement("code",null,m)," could not be found. Use this form to open a Pull Request that creates one."),!h&&e.createElement(Je,{onSubmit:pt,defaultValues:{title:y?.title??"",body:y?.body??"",owner:a.generatedEntities[0]?.spec?.owner||"",componentName:a.generatedEntities[0]?.metadata?.name||"",useCodeowners:!1},render:({values:S,formState:I,register:H,setValue:dt})=>e.createElement(e.Fragment,null,l({values:S,formState:I,register:H,setValue:dt,groups:se??[],groupsLoading:P}),e.createElement(L.A,{marginTop:2},e.createElement(d.A,{variant:"h6"},"Preview Pull Request")),e.createElement(et,{title:S.title,description:S.body,classes:{card:i.previewCard,cardContent:i.previewCardContent}}),e.createElement(L.A,{marginTop:2,marginBottom:1},e.createElement(d.A,{variant:"h6"},"Preview Entities")),e.createElement(qe,{entities:ye(a.generatedEntities,S.componentName,S.owner),repositoryUrl:a.url,classes:{card:i.previewCard,cardContent:i.previewCardContent}}),g&&e.createElement(k.A,{error:!0},g),e.createElement(T.A,{container:!0,spacing:0},o&&e.createElement(B,{onClick:o,disabled:u}),e.createElement(G,{type:"submit",disabled:!!(I.errors.title||I.errors.body||I.errors.owner),loading:u},"Create PR")))}))},at=({analyzeResult:t,prepareResult:a,onPrepare:r,onGoBack:o})=>{const[l,i]=(0,e.useState)(a?.locations.map(g=>g.target)||[]),[c,s]=Re()(t?.locations,g=>g.exists),E=(0,e.useCallback)(async()=>{r({type:"locations",locations:s.filter(g=>l.includes(g.target))})},[s,r,l]),u=g=>{i(v=>v.includes(g)?v.filter(m=>m!==g):v.concat(g))},f=()=>{i(g=>g.length<s.length?s.map(v=>v.target):[])};return e.createElement(e.Fragment,null,s.length>0&&e.createElement(e.Fragment,null,e.createElement(d.A,null,"Select one or more locations that are present in your git repository:"),e.createElement(q,{firstListItem:e.createElement(ve.A,{dense:!0,button:!0,onClick:f},e.createElement(fe.A,null,e.createElement(F.A,{edge:"start",checked:l.length===s.length,indeterminate:l.length>0&&l.length<s.length,tabIndex:-1,disableRipple:!0})),e.createElement(he.A,{primary:"Select All"})),onItemClick:u,locations:s,locationListItemIcon:g=>e.createElement(F.A,{edge:"start",checked:l.includes(g),tabIndex:-1,disableRipple:!0}),collapsed:!0})),c.length>0&&e.createElement(e.Fragment,null,e.createElement(d.A,null,"These locations already exist in the catalog:"),e.createElement(q,{locations:c,locationListItemIcon:()=>e.createElement(z.A,null),withLinks:!0,collapsed:!0})),e.createElement(T.A,{container:!0,spacing:0},o&&e.createElement(B,{onClick:o}),e.createElement(G,{disabled:l.length===0,onClick:E},"Review")))};var rt=n(52262);const ot=({prepareResult:t,onReview:a,onGoBack:r})=>{const o=(0,A.gf)(Le.v),l=(0,A.gf)(V.U),i=(0,rt.s)(),c=l.getOptionalString("app.title")||"Backstage",[s,E]=(0,e.useState)(!1),[u,f]=(0,e.useState)(),g=!!(t.type==="locations"&&t.locations.some(m=>m.exists)),v=(0,e.useCallback)(async()=>{E(!0),i.captureEvent("click","import entity");try{let m=new Array;t.type==="locations"&&(m=await Promise.all(t.locations.filter(y=>y.exists).map(async y=>{const C=(0,oe.U2)(y.entities[0]??y);return await o.refreshEntity(C),{target:y.target}})));const h=await Promise.all(t.locations.filter(y=>!y.exists).map(async y=>{const C=await o.addLocation({type:"url",target:y.target});return{target:C.location.target,entities:C.entities}}));a({...t,refreshed:m,locations:h})}catch(m){(0,Se.tX)(m),t.type==="repository"&&m.message.startsWith("Location was added but has no entities specified yet")?a({...t,locations:t.locations.map(h=>({target:h.target,entities:[]}))}):(f(m.message),E(!1))}},[t,a,o,i]);return e.createElement(e.Fragment,null,t.type==="repository"&&e.createElement(e.Fragment,null,e.createElement(d.A,{paragraph:!0},"The following Pull Request has been opened:"," ",e.createElement(Ce.N_,{to:t.pullRequest.url,target:"_blank",rel:"noopener noreferrer"},t.pullRequest.url)),e.createElement(d.A,{paragraph:!0},"You can already import the location and ",c," will fetch the entities as soon as the Pull Request is merged.")),e.createElement(d.A,null,g?"The following locations already exist in the catalog:":"The following entities will be added to the catalog:"),e.createElement(q,{locations:t.locations,locationListItemIcon:()=>e.createElement(z.A,null)}),u&&e.createElement(k.A,{error:!0},u),e.createElement(T.A,{container:!0,spacing:0},r&&e.createElement(B,{onClick:r,disabled:s}),e.createElement(G,{disabled:s,loading:s,onClick:()=>v()},g?"Refresh":"Import")))};function lt(t,a){switch(t){case"single-location":return{...a,prepare:()=>({stepLabel:e.createElement(O.A,{optional:e.createElement(d.A,{variant:"caption"},"Discovered Locations: 1")},"Select Locations"),content:e.createElement(e.Fragment,null)})};case"multiple-locations":return{...a,prepare:(r,o)=>r.analyzeResult.type!=="locations"?a.prepare(r,o):{stepLabel:e.createElement(O.A,{optional:e.createElement(d.A,{variant:"caption"},"Discovered Locations: ",r.analyzeResult.locations.length)},"Select Locations"),content:e.createElement(at,{analyzeResult:r.analyzeResult,prepareResult:r.prepareResult,onPrepare:r.onPrepare,onGoBack:r.onGoBack})}};case"no-location":return{...a,prepare:(r,o)=>r.analyzeResult.type!=="repository"?a.prepare(r,o):{stepLabel:e.createElement(O.A,null,"Create Pull Request"),content:e.createElement(nt,{analyzeResult:r.analyzeResult,onPrepare:r.onPrepare,onGoBack:r.onGoBack,renderFormFields:({values:l,setValue:i,formState:c,groupsLoading:s,groups:E,register:u})=>e.createElement(e.Fragment,null,e.createElement(L.A,{marginTop:2},e.createElement(d.A,{variant:"h6"},"Pull Request Details")),e.createElement(N.A,{...(0,M.eO)(u("title",{required:!0})),label:"Pull Request Title",placeholder:"Add Backstage catalog entity descriptor files",margin:"normal",variant:"outlined",fullWidth:!0,error:!!c.errors.title,required:!0}),e.createElement(N.A,{...(0,M.eO)(u("body",{required:!0})),label:"Pull Request Body",placeholder:"A describing text with Markdown support",margin:"normal",variant:"outlined",fullWidth:!0,error:!!c.errors.body,multiline:!0,required:!0}),e.createElement(L.A,{marginTop:2},e.createElement(d.A,{variant:"h6"},"Entity Configuration")),e.createElement(N.A,{...(0,M.eO)(u("componentName",{required:!0})),label:"Name of the created component",placeholder:"my-component",margin:"normal",variant:"outlined",fullWidth:!0,error:!!c.errors.componentName,required:!0}),!l.useCodeowners&&e.createElement(je,{name:"owner",errors:c.errors,options:E||[],loading:s,loadingText:"Loading groups\u2026",helperText:"Select an owner from the list or enter a reference to a Group or a User",errorHelperText:"required value",textFieldProps:{label:"Entity Owner",placeholder:"my-group"},rules:{required:!0},required:!0}),e.createElement(ge.A,{control:e.createElement(F.A,{...(0,M.eO)(u("useCodeowners")),onChange:(f,g)=>{g&&i("owner","")}}),label:e.createElement(e.Fragment,null,"Use ",e.createElement("em",null,"CODEOWNERS")," file as Entity Owner")}),e.createElement(k.A,null,"WARNING: This may fail if no CODEOWNERS file is found at the target location."))})}};default:return a}}const st={analyze:(t,{apis:a})=>({stepLabel:e.createElement(O.A,null,"Select URL"),content:e.createElement($e,{key:"analyze",analysisUrl:t.analysisUrl,onAnalysis:t.onAnalysis,disablePullRequest:!a.catalogImportApi.preparePullRequest})}),prepare:t=>({stepLabel:e.createElement(O.A,{optional:e.createElement(d.A,{variant:"caption"},"Optional")},"Import Actions"),content:e.createElement(B,{onClick:t.onGoBack})}),review:t=>({stepLabel:e.createElement(O.A,null,"Review"),content:e.createElement(ot,{prepareResult:t.prepareResult,onReview:t.onReview,onGoBack:t.onGoBack})}),finish:t=>({stepLabel:e.createElement(O.A,null,"Finish"),content:e.createElement(Ve,{prepareResult:t.prepareResult,onReset:t.onReset})})},it=(0,$.A)(()=>({stepperRoot:{padding:0}})),ct=t=>{const{initialUrl:a,generateStepper:r=lt,variant:o}=t,l=(0,A.gf)(Q.g),i=it(),c=b({initialUrl:a}),s=(0,e.useMemo)(()=>r(c.activeFlow,st),[r,c.activeFlow]),E=u=>e.createElement(pe.A,null,u.stepLabel,e.createElement(de.A,null,u.content));return e.createElement(ee.n,{variant:o},e.createElement(Ee.A,{classes:{root:i.stepperRoot},activeStep:c.activeStepNumber,orientation:"vertical"},E(s.analyze(c,{apis:{catalogImportApi:l}})),E(s.prepare(c,{apis:{catalogImportApi:l}})),E(s.review(c,{apis:{catalogImportApi:l}})),E(s.finish(c,{apis:{catalogImportApi:l}}))))},mt=()=>{const t=(0,me.A)(),a=(0,A.gf)(V.U),r=(0,ce.A)(t.breakpoints.down("sm")),o=a.getOptionalString("app.title")||"Backstage",l=`Start tracking your component in ${o} by adding it to the software catalog.`,i=[e.createElement(T.A,{key:0,item:!0,xs:12,md:4,lg:6,xl:8},e.createElement(ue,null)),e.createElement(T.A,{key:1,item:!0,xs:12,md:8,lg:6,xl:4},e.createElement(ct,null))];return e.createElement(D.Y,{themeId:"home"},e.createElement(K.Y,{title:"Register an existing component"}),e.createElement(w.U,null,e.createElement(j.d,{title:`Start tracking your component in ${o}`},e.createElement(ie.Y,null,l)),e.createElement(T.A,{container:!0,spacing:2},r?i:i.reverse())))},ut=()=>(0,W.P1)()||e.createElement(mt,null)},23164:(_,U,n)=>{"use strict";var e,W=n(4293),D=n(78920);e={value:!0},U.A=void 0;var K=D(n(14041)),w=W(n(74044)),j=(0,w.default)(K.createElement("path",{d:"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess");U.A=j},19953:(_,U,n)=>{var e=n(72195),W=e(function(D,K,w){D[w?0:1].push(K)},function(){return[[],[]]});_.exports=W}}]);})();

//# sourceMappingURL=9165.454be8c2.chunk.js.map